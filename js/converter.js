$(document).ready(function(){function l(a){var b="a"==f?"api/":"";$("#progress").html("An error occured. Conversion failed."),$("#converter").before('<div id="error">'+a+' As an alternative you can try to search the song on <a href="http://www.mp3juices.cc/" rel="nofollow" target="_blank">mp3juices.cc</a> and download it from there. <p><a href="'+b+'">Please try to convert another YouTube video by clicking here</a></p></div>')}function m(a,c,d){$("#progress").hide(),"a"==f?(g=!0,$("#new").attr("href","https://www.youtube2mp3.cc/api/")):"p"==f&&($.ajax({url:"p.php",dataType:"jsonp",data:{c:1},success:function(a){a.p&&(g=!0)}}),$("#banner-wrapper").show());var e="http://"+h[a]+".yt-downloader.org/download.php?id="+c+"&d="+d;$("#ad").length?$("#download").attr("href",$("#ad").val()+e):$("#download").attr("href",e),b&&$("#dropbox").show(),$("#buttons").show()}function n(a,b){var c=["converting","converting","converting"];$.ajax({url:"https://d.yt-downloader.org/progress.php",dataType:"jsonp",data:{id:b},success:function(f){var g={};if($.each(f,function(a,b){g[a]="title"==a?b:parseInt(b)}),0<g.error)return d=!0,$.ajax({url:"error.php",async:!1,cache:!1,type:"POST",data:{f:2,e:g.error,s:g.sid,v:a,h:b},success:function(){l(k.convert[g.error])}}),!1;switch(g.progress){case 0:case 1:case 2:!i&&0<g.title.length&&($("#title").html(g.title),i=!0),$("#progress").html(c[g.progress]+" video"+e);break;case 3:i||$("#title").html("No title found"),d=!0,m(g.sid,b,a)}d||window.setTimeout(function(){n(a,b)},3e3)}})}function o(b,c){0<a.h.length?n(a.v,a.h):$.ajax({url:"https://d.yt-downloader.org/check.php",dataType:"jsonp",data:{v:b,f:c},success:function(a){var c={};return $.each(a,function(a,b){c[a]="title"==a||"hash"==a?b:parseInt(b)}),0<c.error?($.ajax({url:"error.php",async:!1,cache:!1,type:"POST",data:{f:1,e:c.error,s:"",v:b,h:""},success:function(){l(k.check[c.error])}}),!1):(0<c.title.length&&($("#title").html(c.title),i=!0),void(0<c.ce&&0<c.sid?m(c.sid,c.hash,b):n(b,c.hash)))}})}function p(a){var b="";return-1<a.search("youtube.com")?b=/v\=[a-zA-Z0-9\-\_]{11}/.exec(a):-1<a.search("youtu.be")&&(b=/\/[a-zA-Z0-9\-\_]{11}/.exec(a)),null!=b&&(b=b.toString(),13==b.length?b.substr(2):12==b.length&&b.substr(1))}var a={v:"",h:""},b=!1,c=!1,d=!1,e='<img src="images/loading.gif" alt="" class="loading">',f="",g=!1,h={1:"gpkio",2:"agobe",3:"macsn",4:"hcqwb",5:"fgkzc",6:"hmqbu",7:"kyhxj",8:"nwwxj",9:"sbist",10:"ditrj",11:"qypbr",12:"trciw",13:"sjjec",14:"afyzk",15:"ocnuq",16:"qxqnh",17:"kzrzi",18:"obdzo",19:"umbbo",20:"aigkk",21:"qgxhg",23:"fkaph",22:"upajk",24:"xqqqh",25:"xrmrw",26:"fjhlv",27:"ejtbn",28:"urynq",29:"tjljs",30:"ywjkg"},i=!1,j={form:{video:"Invalid link or video format"},list:{params:"A wrong parameter was delivered.",conversions:"Please wait until previous conversions are done to start a new conversion.",video_not_found:"The video was not found.",database:"A database error occurred.",video_extraction:"The videoinformation could not be extracted.",video_download:"The video could not be downloaded.",youtube_blocked:"Currently there are no YouTube downloads possible. Please try in a few minutes.",video_age:"The video can't be downloaded because it's not released for people below the age of 18.",video_duration:"We are sorry, the selected video is too long. It may only be 120 minutes long.",download_expired:"The link is no longer valid. The download will be restarted.",session:"Your session has expired, please refresh the page.",video_not_found_2:"The chosen video is no longer available on YouTube."}},k={check:new Array,convert:new Array};if(k.check[0]=j.list.params,k.check[1]=j.list.conversions,k.check[2]=j.list.video_not_found,k.check[3]=j.list.video_download,k.check[7]=j.list.download_expired,k.check[100]=j.list.database,k.check[200]=j.list.session,k.convert[0]=j.list.params,k.convert[1]=j.list.video_download,k.convert[3]=j.list.video_download,k.convert[5]=j.list.youtube_blocked,k.convert[7]=j.list.video_download,k.convert[8]=j.list.video_not_found_2,k.convert[9]=j.list.video_age,k.convert[11]=j.list.video_duration,k.convert[100]=j.list.database,k.convert[102]=j.list.database,k.convert[200]=j.list.session,$("#input").focus(),$("#formats a").click(function(){if(!c)switch($(this).attr("id")){case"mp3":$("#format").val("mp3"),$("#mp4").css("background-color","#0087cf"),$("#mp3").css("background-color","#007cbe");break;case"mp4":$("#format").val("mp4"),$("#mp3").css("background-color","#0087cf"),$("#mp4").css("background-color","#007cbe")}return!1}),$("#dropbox").click(function(){$("#formats").after('<div id="dropbox-progress"></div>');var a={cancel:function(){$("#dropbox-progress").html("Upload to Dropbox failed.")},error:function(a){$("#dropbox-progress").html("An error occured. Upload failed.")},progress:function(a){$("#dropbox-progress").html("Uploading file to dropbox "+e)},success:function(){$("#dropbox-progress").html("Success! File was saved to your Dropbox.")}};return Dropbox.save($("#download").attr("href"),$("#title").html(),a),!1}),$(document).on("click","#download",function(){return g&&(g=!1,"a"==f?window.open("https://www.youtube2mp3.cc/p.php?f=1&amp;m=a"):"p"==f&&window.open("https://www.youtube2mp3.cc/p.php?f=1&amp;m=p")),!0}),$("form").submit(function(){var d=document.createElement("script");if(d.setAttribute("id","dropboxjs"),d.setAttribute("type","text/javascript"),d.setAttribute("src","../www.dropbox.com/static/api/2/dropins.js"),d.setAttribute("data-app-key","nlg9bp1z4vdpbvm"),d.onload=function(){return"object"==typeof Dropbox&&(!!Dropbox.isBrowserSupported()&&void(b=!0))},document.body.appendChild(d),-1<document.URL.toLowerCase().indexOf("api")?(location.href="https://www.youtube2mp3.cc/api/#conversion",f="a"):(location.href="#conversion",f="p"),0<a.v.length)var g=a.v,h="mp3";else{var g=$.trim(decodeURIComponent($("#input").val())),h=$.trim($("#format").val().toLowerCase());g=p(g)}return g?"mp3"!=h&&"mp4"!=h?($("#input").val(j.form.format),!1):11!=g.length&&3!=h.length?($("#input").val(j.list.params),!1):(c=!0,$("#title").html("getting video title "+e),$("form").hide(),$("#progress").html("converting video "+e).show(),o(g,h),!1):($("#input").val(j.form.video),!1)}),0<document.URL.indexOf("#")){var q=document.URL.split("#")[1].split("|");$.each(q,function(a,b){q[a]=$.trim(b)}),"h"==q[0]&&11==q[1].length&&32==q[2].length?(a.v=q[1],a.h=q[2],$("form").submit()):11==q[0].length&&3==q[1].length&&($("#input").val("https://www.youtube.com/watch?v="+q[0]),"mp4"==q[1]&&($("#format").val("mp4"),$("#mp3").css("background-color","#0087cf"),$("#mp4").css("background-color","#007cbe")),3==q.length&&0<q[2].length&&$("#input").after('<input id="ad" type="hidden" name="ad" value="'+decodeURIComponent(q[2])+'">'),$("form").submit())}});
